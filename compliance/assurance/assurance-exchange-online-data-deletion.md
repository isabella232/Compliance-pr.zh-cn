---
title: Microsoft 365 Exchange Online 数据删除
description: 了解在 Exchange Online 中如何处理邮箱和邮箱中的项目的软数据删除和硬数据删除。
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: c88e7359931fb964fbc4cb6531c5151072a50df0
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "51497199"
---
# <a name="exchange-online-data-deletion-in-microsoft-365"></a><span data-ttu-id="8a02a-103">Microsoft 365 中的 Exchange Online 数据删除</span><span class="sxs-lookup"><span data-stu-id="8a02a-103">Exchange Online data deletion in Microsoft 365</span></span>

<span data-ttu-id="8a02a-104">在 Exchange Online 中，有两种类型的删除：软删除和硬删除。</span><span class="sxs-lookup"><span data-stu-id="8a02a-104">Within Exchange Online, there are two kinds of deletions: soft deletions and hard deletions.</span></span> <span data-ttu-id="8a02a-105">这适用于邮箱和邮箱中的项目。</span><span class="sxs-lookup"><span data-stu-id="8a02a-105">This applies to both mailboxes and items within a mailbox.</span></span>

## <a name="soft-deleted-and-hard-deleted-mailboxes"></a><span data-ttu-id="8a02a-106">软删除和硬删除的邮箱</span><span class="sxs-lookup"><span data-stu-id="8a02a-106">Soft-deleted and hard-deleted mailboxes</span></span>

<span data-ttu-id="8a02a-107">软删除的用户邮箱是使用 Microsoft 365 管理中心或 Remove-Mailbox cmdlet 删除的邮箱，并且仍在 Azure Active Directory 回收站中保留不到 30 天。</span><span class="sxs-lookup"><span data-stu-id="8a02a-107">A soft-deleted user mailbox is a mailbox that has been deleted using the Microsoft 365 admin center or the Remove-Mailbox cmdlet and has still been in the Azure Active Directory recycle bin for less than 30 days.</span></span> <span data-ttu-id="8a02a-108">邮箱可以通过以下任一方式变为软删除：</span><span class="sxs-lookup"><span data-stu-id="8a02a-108">A mailbox can become soft-deleted in any of the following ways:</span></span>

- <span data-ttu-id="8a02a-109">用户邮箱的关联 Azure Active Directory 用户帐户被软删除 (用户对象超出范围或位于回收站容器) 。</span><span class="sxs-lookup"><span data-stu-id="8a02a-109">The user mailbox's associated Azure Active Directory user account is soft-deleted (the user object is out of scope or in the recycle bin container).</span></span>
- <span data-ttu-id="8a02a-110">用户邮箱的关联 Azure Active Directory 用户帐户已被硬删除，但 Exchange Online 邮箱位于诉讼保留或电子数据展示保留下。</span><span class="sxs-lookup"><span data-stu-id="8a02a-110">The user mailbox's associated Azure Active Directory user account has been hard-deleted but the Exchange Online mailbox is under a litigation hold or eDiscovery hold.</span></span>
- <span data-ttu-id="8a02a-111">用户邮箱的关联 Azure Active Directory 用户帐户已过去 30 天内清除;这是 Exchange Online 在永久清除和不可恢复之前使邮箱保持软删除状态的最大保留长度。</span><span class="sxs-lookup"><span data-stu-id="8a02a-111">The user mailbox's associated Azure Active Directory user account has been purged within the last 30 days; which is the maximum retention length Exchange Online will keep the mailbox in a soft-deleted state before it is permanently purged and unrecoverable.</span></span>

<span data-ttu-id="8a02a-112">硬删除的用户邮箱是已经通过以下方法之一删除的邮箱：</span><span class="sxs-lookup"><span data-stu-id="8a02a-112">A hard-deleted user mailbox is a mailbox that has been deleted in one of the following ways:</span></span>

- <span data-ttu-id="8a02a-113">用户邮箱已软删除 30 天以上，并且已硬删除关联的 Azure Active Directory 用户。</span><span class="sxs-lookup"><span data-stu-id="8a02a-113">The user mailbox has been soft-deleted for more than 30 days, and the associated Azure Active Directory user has been hard-deleted.</span></span> <span data-ttu-id="8a02a-114">将永久删除所有邮箱内容，如电子邮件、联系人和文件。</span><span class="sxs-lookup"><span data-stu-id="8a02a-114">All mailbox content such as emails, contacts, and files are permanently deleted.</span></span>
- <span data-ttu-id="8a02a-115">已硬从 Azure Active Directory 中删除与用户邮箱关联的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="8a02a-115">The user account associated with the user mailbox has been hard-deleted from the Azure Active Directory.</span></span> <span data-ttu-id="8a02a-116">用户邮箱现在在 Exchange Online 中软删除，并保持软删除状态 30 天。</span><span class="sxs-lookup"><span data-stu-id="8a02a-116">The user mailbox is now soft-deleted in Exchange Online and stays in a soft-deleted state for 30 days.</span></span> <span data-ttu-id="8a02a-117">如果在 30 天期间，新 Azure Active Directory 用户从原始收件人帐户与同一 **ExchangeGuid** 或 **ArchiveGuid** 同步，并且该新帐户已获得 Exchange Online 许可，则会导致硬删除原始用户邮箱。</span><span class="sxs-lookup"><span data-stu-id="8a02a-117">If in the 30-day period a new Azure Active Directory user is synchronized from the original recipient account with the same **ExchangeGuid** or **ArchiveGuid**, and that new account is licensed for Exchange Online, this will result in a hard deletion of the original user mailbox.</span></span> <span data-ttu-id="8a02a-118">将永久删除所有邮箱内容，如电子邮件、联系人和文件。</span><span class="sxs-lookup"><span data-stu-id="8a02a-118">All mailbox content such as emails, contacts, and files are permanently deleted.</span></span>
- <span data-ttu-id="8a02a-119">使用 **Remove-Mailbox -PermanentlyDelete 删除软删除的邮箱**。</span><span class="sxs-lookup"><span data-stu-id="8a02a-119">A soft-deleted mailbox is deleted using **Remove-Mailbox -PermanentlyDelete**.</span></span>

<span data-ttu-id="8a02a-120">上述删除方案假定用户邮箱未在任何保留状态，如诉讼保留或电子数据展示保留。</span><span class="sxs-lookup"><span data-stu-id="8a02a-120">The above deletion scenarios assume that the user mailbox isn't in any of the hold states, like Litigation hold or eDiscovery hold.</span></span> <span data-ttu-id="8a02a-121">如果邮箱上存在任何类型的保留，则不能删除该邮箱。</span><span class="sxs-lookup"><span data-stu-id="8a02a-121">If there is any type of hold on the mailbox, then the mailbox can't be deleted.</span></span> <span data-ttu-id="8a02a-122">对于所有邮件用户收件人类型，任何 [保留](https://support.office.com/article/manage-legal-investigations-in-office-365-2e5fbe9f-ee4d-4178-8ff8-4356bc1b168e?ui=en-US&rs=en-US&ad=US) 设置将被忽略，并且对硬删除或软删除没有影响。</span><span class="sxs-lookup"><span data-stu-id="8a02a-122">For all mail-user recipient types, any [Hold](https://support.office.com/article/manage-legal-investigations-in-office-365-2e5fbe9f-ee4d-4178-8ff8-4356bc1b168e?ui=en-US&rs=en-US&ad=US) settings are ignored and have no effect on hard-deletions or soft-deletions.</span></span>

## <a name="soft-deleted-and-hard-deleted-items"></a><span data-ttu-id="8a02a-123">软删除和硬删除的项目</span><span class="sxs-lookup"><span data-stu-id="8a02a-123">Soft-deleted and hard-deleted items</span></span>

<span data-ttu-id="8a02a-124">当用户删除邮箱项目 (如电子邮件、联系人、日历约会或任务) 时，该项目将移动到"可恢复的项目"文件夹，并放入名为"Deletions"的子文件夹中。</span><span class="sxs-lookup"><span data-stu-id="8a02a-124">When a user deletes a mailbox item (such as an email message, a contact, a calendar appointment, or a task), the item is moved to the Recoverable Items folder, and into a subfolder named "Deletions".</span></span> <span data-ttu-id="8a02a-125">这称为软删除。</span><span class="sxs-lookup"><span data-stu-id="8a02a-125">This is referred to as a soft deletion.</span></span> <span data-ttu-id="8a02a-126">已删除的项目保留在" 删除"文件夹中的时间取决于为邮箱设置的"已删除项目保留期限"。</span><span class="sxs-lookup"><span data-stu-id="8a02a-126">How long deleted items are kept in the Deletions folder depends on the deleted item retention period that is set for the mailbox.</span></span> <span data-ttu-id="8a02a-127">默认情况下，Exchange Online 邮箱将已删除项目保留 14 天，但 Exchange Online 管理员可以更改此设置，将期限最长增加至 30 天。</span><span class="sxs-lookup"><span data-stu-id="8a02a-127">An Exchange Online mailbox keeps deleted items for 14 days by default, but Exchange Online administrators can change this setting to increase the period up to a maximum of 30 days.</span></span> <span data-ttu-id="8a02a-128"> (有关增加 Exchange Online 邮箱的已删除邮件保留期限的详细步骤，请参阅更改 [为 Exchange Online](/exchange/recipients-in-exchange-online/manage-user-mailboxes/change-deleted-item-retention)邮箱保留永久删除的项目的时间。) 用户可以在已删除项目的保留时间过期之前恢复或清除已删除的项目。</span><span class="sxs-lookup"><span data-stu-id="8a02a-128">(For detailed steps to increase the deleted item retention period for an Exchange Online mailbox, see [Change how long permanently deleted items are kept for an Exchange Online mailbox](/exchange/recipients-in-exchange-online/manage-user-mailboxes/change-deleted-item-retention).) Users can recover, or purge, deleted items before the retention time for a deleted item expires.</span></span> <span data-ttu-id="8a02a-129">为此，他们使用 Microsoft Outlook 或 Web 上的 Outlook 中的"恢复已删除邮件"功能。</span><span class="sxs-lookup"><span data-stu-id="8a02a-129">To do so, they use the Recover Deleted Items feature in Microsoft Outlook or Outlook on the web.</span></span>

<span data-ttu-id="8a02a-130">如果用户使用 Outlook 或 Web 上的 Outlook 中的"恢复已删除邮件"功能清除已删除的项目，这称为硬删除。</span><span class="sxs-lookup"><span data-stu-id="8a02a-130">If a user purges a deleted item by using the Recover Deleted Items feature in Outlook or Outlook on the web, this is known as a hard deletion.</span></span> <span data-ttu-id="8a02a-131">在 Exchange Online 中，新建邮箱时默认启用单个项目恢复，因此管理员仍可以在已删除项目的[](/Exchange/recipients/user-mailboxes/recover-deleted-messages)保留期过期之前恢复硬删除的项目。</span><span class="sxs-lookup"><span data-stu-id="8a02a-131">In Exchange Online, single item recovery is enabled by default when a new mailbox is created, so an administrator can still [recover](/Exchange/recipients/user-mailboxes/recover-deleted-messages) hard-deleted items before the deleted item retention period expires.</span></span> <span data-ttu-id="8a02a-132">此外，如果单个项目恢复已启用，那么当用户或进程更改邮件时，原始项目的副本也会予以保留。</span><span class="sxs-lookup"><span data-stu-id="8a02a-132">Also, if a message is changed by a user or a process, copies of the original item are also retained when single item recovery is enabled.</span></span>

## <a name="page-zeroing"></a><span data-ttu-id="8a02a-133">页清零</span><span class="sxs-lookup"><span data-stu-id="8a02a-133">Page zeroing</span></span>

<span data-ttu-id="8a02a-134">*清零* 是一种安全机制，它通过已删除的数据写入零或二进制模式，以便删除的数据更难恢复。</span><span class="sxs-lookup"><span data-stu-id="8a02a-134">*Zeroing* is a security mechanism that writes either zeros or a binary pattern over deleted data so that the deleted data is more difficult to recover.</span></span> <span data-ttu-id="8a02a-135">在 Exchange Online 中，邮箱数据库使用 *页面* 作为存储单元，并实现了一个称为页面清零 *的覆盖过程*。</span><span class="sxs-lookup"><span data-stu-id="8a02a-135">In Exchange Online, mailbox databases use *pages* as their unit of storage, and implement an overwriting process called *page zeroing*.</span></span> <span data-ttu-id="8a02a-136">默认情况下，页面清零处于启用状态，客户或 Microsoft 无法禁用它。</span><span class="sxs-lookup"><span data-stu-id="8a02a-136">Page zeroing is enabled by default, and it cannot be disabled by customers or by Microsoft.</span></span> <span data-ttu-id="8a02a-137">在事务日志文件中记录页清零操作，以便以类似方式将给定数据库的所有副本都清零页。</span><span class="sxs-lookup"><span data-stu-id="8a02a-137">Page zeroing operations are recorded in the transaction log files so that all copies of a given database are page-zeroed in a similar manner.</span></span> <span data-ttu-id="8a02a-138">对主动数据库副本上的页进行清零会使该页在数据库的被动副本上清零。</span><span class="sxs-lookup"><span data-stu-id="8a02a-138">Zeroing a page on an active database copy causes the page to get zeroed on passive copies of the database.</span></span>

<span data-ttu-id="8a02a-139">页清零会写入硬删除记录的二进制模式。</span><span class="sxs-lookup"><span data-stu-id="8a02a-139">Page zeroing writes a binary pattern over hard-deleted records.</span></span> <span data-ttu-id="8a02a-140">页清零模式特定于可扩展存储引擎 (ESE) 操作 (Exchange Online) 中服务器使用的内部数据库引擎的名称，与后台数据库维护操作相比，它对于运行时操作有所不同。</span><span class="sxs-lookup"><span data-stu-id="8a02a-140">The page-zeroing pattern is specific to Extensible Storage Engine (ESE) operations (the name of the internal database engine used by servers in Exchange Online), and it is different for run-time operations versus background database maintenance operations.</span></span> <span data-ttu-id="8a02a-141"> (后台数据库维护是一个持续校验和扫描每个数据库的过程。</span><span class="sxs-lookup"><span data-stu-id="8a02a-141">(Background database maintenance is a process that continuously checksums and scans each database.</span></span> <span data-ttu-id="8a02a-142">其主要功能是校验和数据库页，但还处理清理空间以及清零由于应用商店崩溃而未清零的记录和) </span><span class="sxs-lookup"><span data-stu-id="8a02a-142">Its primary function is to checksum database pages, but it also handles cleaning up space and zeroing out records and pages that were not zeroed out because of a Store crash.)</span></span>

<span data-ttu-id="8a02a-143">下表列出对应于特定运行时操作的填充模式。</span><span class="sxs-lookup"><span data-stu-id="8a02a-143">The following table lists the fill patterns that correspond to specific run-time operations.</span></span>

| <span data-ttu-id="8a02a-144">ESE 运行时操作</span><span class="sxs-lookup"><span data-stu-id="8a02a-144">ESE run-time operation</span></span>   | <span data-ttu-id="8a02a-145">填充模式</span><span class="sxs-lookup"><span data-stu-id="8a02a-145">Fill pattern</span></span> |
|--------------------------|--------------|
| <span data-ttu-id="8a02a-146">替换</span><span class="sxs-lookup"><span data-stu-id="8a02a-146">Replace</span></span>                  | <span data-ttu-id="8a02a-147">R</span><span class="sxs-lookup"><span data-stu-id="8a02a-147">R</span></span>            |
| <span data-ttu-id="8a02a-148">记录/长数值删除</span><span class="sxs-lookup"><span data-stu-id="8a02a-148">Record/long value delete</span></span> | <span data-ttu-id="8a02a-149">D</span><span class="sxs-lookup"><span data-stu-id="8a02a-149">D</span></span>            |
| <span data-ttu-id="8a02a-150">释放的页空间</span><span class="sxs-lookup"><span data-stu-id="8a02a-150">Freed page space</span></span>         | <span data-ttu-id="8a02a-151">H</span><span class="sxs-lookup"><span data-stu-id="8a02a-151">H</span></span>            |

<span data-ttu-id="8a02a-152">下表列出对应于在 ESE 后台数据库维护期间进行的特定操作的填充模式。</span><span class="sxs-lookup"><span data-stu-id="8a02a-152">The following table lists the fill patterns that correspond to specific operations that occur during ESE background database maintenance.</span></span>

| <span data-ttu-id="8a02a-153">ESE 后台数据库维护操作</span><span class="sxs-lookup"><span data-stu-id="8a02a-153">ESE background database maintenance operation</span></span> | <span data-ttu-id="8a02a-154">填充模式</span><span class="sxs-lookup"><span data-stu-id="8a02a-154">Fill pattern</span></span> |
|-----------------------------------------------|--------------|
| <span data-ttu-id="8a02a-155">记录删除</span><span class="sxs-lookup"><span data-stu-id="8a02a-155">Record delete</span></span>                                 | <span data-ttu-id="8a02a-156">D</span><span class="sxs-lookup"><span data-stu-id="8a02a-156">D</span></span>            |
| <span data-ttu-id="8a02a-157">长数值删除</span><span class="sxs-lookup"><span data-stu-id="8a02a-157">Long value delete</span></span>                             | <span data-ttu-id="8a02a-158">L</span><span class="sxs-lookup"><span data-stu-id="8a02a-158">L</span></span>            |
| <span data-ttu-id="8a02a-159">部分使用的页的释放页空间</span><span class="sxs-lookup"><span data-stu-id="8a02a-159">Freed page space of partially used page</span></span>       | <span data-ttu-id="8a02a-160">Z</span><span class="sxs-lookup"><span data-stu-id="8a02a-160">Z</span></span>            |
| <span data-ttu-id="8a02a-161">未使用的页的释放页空间</span><span class="sxs-lookup"><span data-stu-id="8a02a-161">Freed page space of unused page</span></span>               | <span data-ttu-id="8a02a-162">U</span><span class="sxs-lookup"><span data-stu-id="8a02a-162">U</span></span>            |

### <a name="page-zeroing-process"></a><span data-ttu-id="8a02a-163">页清零过程</span><span class="sxs-lookup"><span data-stu-id="8a02a-163">Page zeroing process</span></span>

<span data-ttu-id="8a02a-164">页清零的过程取决于删除方案。</span><span class="sxs-lookup"><span data-stu-id="8a02a-164">The process for page zeroing depends on the deletion scenario.</span></span> <span data-ttu-id="8a02a-165">下表讨论数据库删除方案以及页清零功能的执行时间。</span><span class="sxs-lookup"><span data-stu-id="8a02a-165">The following table discusses database delete scenarios, and when page zeroing functions occur.</span></span>

| <span data-ttu-id="8a02a-166">数据库删除方案</span><span class="sxs-lookup"><span data-stu-id="8a02a-166">Database delete scenario</span></span> | <span data-ttu-id="8a02a-167">对数据库数据清零的 ESE 过程和时间范围</span><span class="sxs-lookup"><span data-stu-id="8a02a-167">ESE process and timeframe to zero database data</span></span> |
|:--------------------------|:------------------------------------------------|
| <span data-ttu-id="8a02a-168">项目根据已删除项目的保留期过期。</span><span class="sxs-lookup"><span data-stu-id="8a02a-168">Item expires based on the deleted item retention period.</span></span> | <span data-ttu-id="8a02a-169">一个异步线程对删除的数据写入二进制模式。</span><span class="sxs-lookup"><span data-stu-id="8a02a-169">An asynchronous thread writes a binary pattern over the deleted data.</span></span> <span data-ttu-id="8a02a-170">此操作在数毫秒的记录删除过程中发生。</span><span class="sxs-lookup"><span data-stu-id="8a02a-170">This action occurs within milliseconds of the record deletion.</span></span> <span data-ttu-id="8a02a-171">如果当异步清零工作仍未完成时存储进程崩溃 (或者版本存储清理因版本存储增长) 而取消，则当后台数据库维护处理数据库的这一部分时，将完成清零。</span><span class="sxs-lookup"><span data-stu-id="8a02a-171">If the Store process crashes while the asynchronous zeroing work is still outstanding (or version store cleanup is canceled due to version store growth), the zeroing is completed when background database maintenance processes that section of the database.</span></span> |
| <span data-ttu-id="8a02a-172">视图方案：Outlook/Web 上的 Outlook 文件夹视图中的项目过期 (例如，会话视图) </span><span class="sxs-lookup"><span data-stu-id="8a02a-172">View Scenario: Expiration of items from Outlook/Outlook on the web folder view (for example, Conversation view)</span></span> | <span data-ttu-id="8a02a-173">当后台数据库维护处理该部分数据库时会进行数据清零。</span><span class="sxs-lookup"><span data-stu-id="8a02a-173">Data zeroing occurs when background database maintenance processes that section of the database.</span></span> |
| <span data-ttu-id="8a02a-174">移动邮箱/删除邮箱方案：已删除的邮箱 (源邮箱已删除) </span><span class="sxs-lookup"><span data-stu-id="8a02a-174">Move Mailbox/Delete Mailbox Scenario: Source mailbox deleted (expiry of deleted mailbox)</span></span> | <span data-ttu-id="8a02a-175">当后台数据库维护处理该部分数据库时会进行数据清零。</span><span class="sxs-lookup"><span data-stu-id="8a02a-175">Data zeroing occurs when background database maintenance processes that section of the database.</span></span> |

### <a name="mailbox-data-types-without-page-zeroing"></a><span data-ttu-id="8a02a-176">没有页清零的邮箱数据类型</span><span class="sxs-lookup"><span data-stu-id="8a02a-176">Mailbox data types without page zeroing</span></span>

<span data-ttu-id="8a02a-177">以下邮箱数据类型没有页面清零设置：</span><span class="sxs-lookup"><span data-stu-id="8a02a-177">The following mailbox data types have no provisions for page zeroing:</span></span>

- <span data-ttu-id="8a02a-178">**邮箱数据库事务** 日志 - 作为正常操作一部分删除事务日志时，不会将存储已删除邮件的邮箱的文件系统中的块清零日志文件 (零) 。</span><span class="sxs-lookup"><span data-stu-id="8a02a-178">**Mailbox database transaction logs** - When transaction logs are deleted as part of normal operations, there is no process to zero the blocks in the file system that stored the deleted log file(s).</span></span> <span data-ttu-id="8a02a-179">文件系统可能会快速重新利用新创建的日志的可用空间，但无法保证会发生此情况。</span><span class="sxs-lookup"><span data-stu-id="8a02a-179">It's likely that the file system will quickly reutilize that free space for newly created logs, but there is no guarantee that this will happen.</span></span>
- <span data-ttu-id="8a02a-180">**内容索引目录文件** - Exchange Online 使用 Search Foundation (FAST) 搜索索引功能。</span><span class="sxs-lookup"><span data-stu-id="8a02a-180">**Content index catalog files** - Exchange Online uses Search Foundation (also known as FAST) for search indexing functionality.</span></span> <span data-ttu-id="8a02a-181">搜索索引目录由存储在与邮箱数据库文件相同的卷上的几十个文件组成。</span><span class="sxs-lookup"><span data-stu-id="8a02a-181">The search index catalog is composed of several dozen files stored on the same volume as the mailbox database file.</span></span> <span data-ttu-id="8a02a-182">当从邮箱数据库中硬删除邮件时，不会立即删除搜索编录中的关联内容。</span><span class="sxs-lookup"><span data-stu-id="8a02a-182">When a message is hard-deleted from the mailbox database, the associated content in the search catalog isn't immediately deleted.</span></span> <span data-ttu-id="8a02a-183">当 Search Foundation 执行卷影 (或主) 将许多小目录文件合并到一个较大的文件中时，将发生内容删除。</span><span class="sxs-lookup"><span data-stu-id="8a02a-183">Content deletion occurs when Search Foundation does a shadow (or master merge) of many small catalog files in to a single larger file.</span></span> <span data-ttu-id="8a02a-184">主合并完成后，会删除较小的编录文件。</span><span class="sxs-lookup"><span data-stu-id="8a02a-184">After the master merge completes, the smaller catalog files are deleted.</span></span> <span data-ttu-id="8a02a-185">没有将存储已删除目录文件的块清零的过程。</span><span class="sxs-lookup"><span data-stu-id="8a02a-185">There is no process to zero the blocks that stored the deleted catalog files.</span></span>

## <a name="continuous-replication"></a><span data-ttu-id="8a02a-186">连续复制</span><span class="sxs-lookup"><span data-stu-id="8a02a-186">Continuous replication</span></span>

<span data-ttu-id="8a02a-187">连续 (也称为日志交付和重播) 是 Exchange Online 中的一项技术，用于创建和维护每个邮箱数据库的副本，以提供高可用性、站点恢复和灾难恢复。</span><span class="sxs-lookup"><span data-stu-id="8a02a-187">Continuous replication (also known as log shipping and replay) is technology in Exchange Online that creates and maintains copies of every mailbox database to provide high availability, site resilience, and disaster recovery.</span></span> <span data-ttu-id="8a02a-188">连续复制使用Exchange Server崩溃恢复支持来提供用于执行邮箱数据库的一个或多个副本的异步更新的技术。</span><span class="sxs-lookup"><span data-stu-id="8a02a-188">Continuous replication uses the Exchange Server database crash recovery support to provide technology that performs asynchronous updating of one or more copies of a mailbox database.</span></span> <span data-ttu-id="8a02a-189">每个邮箱服务器记录对活动数据库数据库 (例如，用户电子邮件活动) 1 MB 事务日志文件中的日志记录。</span><span class="sxs-lookup"><span data-stu-id="8a02a-189">Each mailbox server records database updates made on an active database (for example, user email activity) as log records in a sequential set of 1-MB transaction log files.</span></span> <span data-ttu-id="8a02a-190">这组文件称为日志流。</span><span class="sxs-lookup"><span data-stu-id="8a02a-190">This set of files is referred to as the log stream.</span></span> <span data-ttu-id="8a02a-191">在连续复制中，日志流还用于异步更新数据库的一个或多个副本。</span><span class="sxs-lookup"><span data-stu-id="8a02a-191">In continuous replication, the log stream is also used to asynchronously update one or more copies of a database.</span></span> <span data-ttu-id="8a02a-192">这是通过以下方法完成的：将日志传输到包含主动数据库被动副本的位置，然后将这些日志重播到被动数据库副本中。</span><span class="sxs-lookup"><span data-stu-id="8a02a-192">This is accomplished by transmitting the logs to a location containing a passive copy of the active database and then replaying them into the passive database copy.</span></span> <span data-ttu-id="8a02a-193">如果针对数据库的被动副本重播活动数据库的所有日志，则两个数据库是等效的，并且通过此过程，对活动数据库进行的任何物理更改都将被复制到该数据库的所有被动副本。</span><span class="sxs-lookup"><span data-stu-id="8a02a-193">If all logs from the active database are replayed against a passive copy of the database, then the two databases are equivalent, and it is through this process that any physical change made to an active database is replicated to all passive copies of that database.</span></span>

<span data-ttu-id="8a02a-194">从邮箱数据库执行的任何删除操作（无论是邮箱项目还是整个邮箱，以及软删除还是硬删除）都表示对活动数据库的物理更改。</span><span class="sxs-lookup"><span data-stu-id="8a02a-194">Any deletion from a mailbox database, whether a mailbox item or an entire mailbox, and whether a soft-delete or a hard-delete, represents a physical change to the active database.</span></span> <span data-ttu-id="8a02a-195">页清零还需要对活动数据库进行物理更改。</span><span class="sxs-lookup"><span data-stu-id="8a02a-195">Page zeroing also entails making physical changes to the active database.</span></span> <span data-ttu-id="8a02a-196">这些更改通过称为连续复制的过程写入日志文件，当针对数据库的被动副本重播这些日志文件时，将针对这些被动数据库进行相同的物理更改。</span><span class="sxs-lookup"><span data-stu-id="8a02a-196">These changes are written to the log files through a process called continuous replication, and when those log files are replayed against passive copies of the database, the same physical changes are made to those passive databases.</span></span>
